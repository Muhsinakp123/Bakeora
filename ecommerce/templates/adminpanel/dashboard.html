{% extends 'adminpanel/base.html' %}
{% block title %}Bakeora | Admin Dashboard{% endblock %}

{% block content %}

<h2 class="text-3xl font-bold mb-2">Admin Dashboard</h2>
<p class="text-gray-400 mb-8">Overview of store performance</p>

<!-- STATS -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">

  <div class="bg-[#151534] p-6 rounded-xl shadow">
    <p class="text-gray-400 text-sm">Total Orders</p>
    <h3 class="text-3xl font-bold text-purple-400">{{ total_orders }}</h3>
  </div>

  <div class="bg-[#151534] p-6 rounded-xl shadow">
    <p class="text-gray-400 text-sm">Revenue</p>
    <h3 class="text-3xl font-bold text-green-400">‚Çπ {{ revenue }}</h3>
  </div>

  <div class="bg-[#151534] p-6 rounded-xl shadow">
    <p class="text-gray-400 text-sm">Pending Orders</p>
    <h3 class="text-3xl font-bold text-yellow-400">{{ pending }}</h3>
  </div>

</div>

<!-- GRID -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

  <!-- BEST SELLERS -->
  <div class="bg-[#151534] p-6 rounded-xl shadow">
    <h4 class="text-lg font-semibold mb-4">üç∞ Best Selling Items</h4>

    {% if top_products %}
      <ul class="space-y-2 text-sm">
        {% for item in top_products %}
          <li class="flex justify-between">
            <span>{{ item.product__name }}</span>
            <span class="text-purple-400 font-semibold">{{ item.qty }}</span>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-gray-400 text-sm">No sales data yet</p>
    {% endif %}
  </div>

  <!-- CHART -->
  <div class="bg-[#151534] p-6 rounded-xl shadow col-span-2">
    <h4 class="text-lg font-semibold mb-4">üìä Orders Overview</h4>
    <canvas id="ordersChart" height="120"></canvas>
  </div>

</div>

<script>
const ctx = document.getElementById('ordersChart');

new Chart(ctx, {
  type: 'bar',
  data: {
    labels: ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
    datasets: [{
      label: 'Orders',
      data: [12, 19, 8, 15, 22, 30, 18],
      backgroundColor: '#a855f7',
      borderRadius: 10
    }]
  },
  options: {
    plugins: {
      legend: { display: false }
    },
    scales: {
      y: { ticks: { color: '#9ca3af' } },
      x: { ticks: { color: '#9ca3af' } }
    }
  }
});
</script>

{% endblock %}
