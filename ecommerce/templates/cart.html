{% extends 'master.html' %}
{% load static %}

{% block title %}My Cart | Bakeora{% endblock %}

{% block content %}
<section class="container py-5 mt-5">

  <h3 class="fw-bold mb-4">My Cart</h3>

  {% if cart.items.exists %}

  <div class="row g-4">

    <!-- LEFT : CART ITEMS -->
    <div class="col-lg-8">

      {% for item in cart.items.all %}
      <div class="d-flex align-items-center border-bottom py-3">

        <!-- Product Image -->
        <img src="{{ item.product.image.url }}"
             class="rounded me-3"
             width="90"
             alt="{{ item.product.name }}">

        <!-- Product Info -->
        <div class="flex-grow-1">
          <h6 class="mb-1">{{ item.product.name }}</h6>
          <p class="text-muted mb-1">₹{{ item.product.price }}</p>

          <!-- Quantity -->
          <div class="d-flex align-items-center gap-2">
            <span class="badge bg-light text-dark">Qty: {{ item.quantity }}</span>
          </div>
        </div>

        <!-- Remove -->
        <a href="{% url 'remove_from_cart' item.id %}"
           class="text-danger ms-3"
           title="Remove">
          <i class="fa-solid fa-trash"></i>
        </a>

      </div>
      {% endfor %}

    </div>

    <!-- RIGHT : ORDER SUMMARY -->
    <div class="col-lg-4">
      <div class="border rounded p-4 shadow-sm">

        <h5 class="fw-bold mb-3">Order Summary</h5>

        <div class="d-flex justify-content-between mb-2">
          <span>Subtotal</span>
          <strong>₹{{ cart.total_price }}</strong>
        </div>

        <div class="d-flex justify-content-between mb-2">
          <span>Delivery</span>
          <span class="text-success">Free</span>
        </div>

        <hr>

        <div class="d-flex justify-content-between mb-3">
          <strong>Total</strong>
          <strong class="fs-5">₹{{ cart.total_price }}</strong>
        </div>

        <a href="{% url 'checkout' %}" class="btn btn-dark w-100">
          Proceed to Checkout
        </a>

      </div>
    </div>

  </div>

  {% else %}

  <!-- EMPTY CART -->
  <div class="text-center py-5">
    <i class="fa-solid fa-cart-shopping fa-3x text-muted mb-3"></i>
    <h5>Your cart is empty</h5>
    <p class="text-muted">Looks like you haven’t added anything yet.</p>

    <a href="{% url 'shop' %}" class="btn btn-dark mt-3">
      Continue Shopping
    </a>
  </div>

  {% endif %}

</section>
{% endblock %}
