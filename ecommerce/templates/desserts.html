{% extends "master.html" %}
{% load static %}

{% block title %}Desserts | Bakeora{% endblock %}

{% block content %}

<!-- ================= LUXURY HERO ================= -->
<section class="dessert-hero-lux">
  <div class="container">
    <div class="dessert-hero-panel">
      <div class="row align-items-center">

        <div class="col-md-6 dessert-hero-left">
          <h1>We Deliver<br>Quality Desserts</h1>
          <p>Indulge in handcrafted delights made with premium ingredients.</p>
        </div>

        <div class="col-md-6 dessert-hero-right">
          <img src="{% static 'images/dessert-hero.png' %}">
        </div>

      </div>
    </div>
  </div>

  <div class="dessert-hero-gold"></div>
</section>
<!-- ================= POPULAR PICKS ================= -->
<section class="dessert-popular-lux py-5">
  <div class="container text-center">

    <h2 class="dessert-section-title">
      Popular Picks
      <span class="dessert-title-divider"></span>
    </h2>

    <p class="dessert-section-subtitle">
      Our most loved desserts
    </p>

    <div class="row g-4 mt-4">

      <!-- Card -->
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="dessert-gold-frame">
          <div class="dessert-card">
            <img src="{% static 'images/browny.jpg' %}" alt="Brownie">
            <div class="dessert-card-info">
              <h5>Brownie</h5>
              <span>₹350</span>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-sm-6 col-lg-4">
        <div class="dessert-gold-frame">
          <div class="dessert-card">
            <img src="{% static 'images/donuts.jpg' %}" alt="Donuts">
            <div class="dessert-card-info">
              <h5>Donuts</h5>
              <span>₹200</span>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-sm-6 col-lg-4">
        <div class="dessert-gold-frame">
          <div class="dessert-card">
            <img src="{% static 'images/macaroons.jpg' %}" alt="Macaroons">
            <div class="dessert-card-info">
              <h5>Macaroons</h5>
              <span>₹300</span>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- ================= FILTER BAR ================= -->
<section class="cakes-filter-bar">
  <div class="container">
    <form method="get" class="cakes-filter-inner">

      <select name="category" class="cakes-filter" onchange="this.form.submit()">
        <option value="" hidden>Category</option>
        <option value="pastries" {% if request.GET.category == 'pastries' %}selected{% endif %}>Pastries</option>
        <option value="cookies_biscuits" {% if request.GET.category == 'cookies_biscuits' %}selected{% endif %}>Cookies & Biscuits</option>
        <option value="brownie" {% if request.GET.category == 'brownie' %}selected{% endif %}>Brownie</option>
        <option value="pistachio" {% if request.GET.category == 'pistachio' %}selected{% endif %}>Pistachio</option>
      </select>

      <select name="flavor" class="cakes-filter" onchange="this.form.submit()">
        <option value="" hidden>Flavor</option>
        <option value="chocolate">Chocolate</option>
        <option value="vanilla">Vanilla</option>
        <option value="fruit">Fruit</option>
        <option value="nutty_caramel">Nutty & Caramel</option>
      </select>

      <select name="price" class="cakes-filter" onchange="this.form.submit()">
        <option value="" hidden>Price</option>
        <option value="low-high">Low → High</option>
        <option value="high-low">High → Low</option>
      </select>

    </form>
  </div>
</section>

<!-- ================= DESSERT GRID ================= -->
<section id="dessert-grid" class="cakes-grid py-5">
  <div class="container">
    <div class="row g-4">

      {% for dessert in page_obj %}
      <div class="col-12 col-sm-6 col-lg-3">

        <!-- ✅ STEP 3 LUX CARD -->
        <div class="lux-card">
          <div class="lux-img-wrap">
            <img src="{{ dessert.image.url }}" alt="{{ dessert.name }}">
          </div>
          <div class="lux-card-body">
            <h5>{{ dessert.name }}</h5>
            <span>₹{{ dessert.price }}</span>
          </div>
        </div>

      </div>
      {% empty %}
        <p class="text-center">No desserts found</p>
      {% endfor %}

    </div>
  </div>
</section>

<!-- ================= PAGINATION ================= -->
<div class="pagination-wrap mb-5">
  <ul class="pagination justify-content-center">

    {% if page_obj.has_previous %}
    <li class="page-item">
      <a class="page-link" href="?{{ request.GET.urlencode }}&page={{ page_obj.previous_page_number }}">
        Previous
      </a>
    </li>
    {% endif %}

    {% for num in page_obj.paginator.page_range %}
    <li class="page-item {% if page_obj.number == num %}active{% endif %}">
      <a class="page-link" href="?{{ request.GET.urlencode }}&page={{ num }}">{{ num }}</a>
    </li>
    {% endfor %}

    {% if page_obj.has_next %}
    <li class="page-item">
      <a class="page-link" href="?{{ request.GET.urlencode }}&page={{ page_obj.next_page_number }}">
        Next
      </a>
    </li>
    {% endif %}

  </ul>
</div>

{% endblock %}
