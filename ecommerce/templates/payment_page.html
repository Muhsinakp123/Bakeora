{% extends "master.html" %}
{% block title %}Pay for {{ cake.name }} | Bakeora{% endblock %}

{% block content %}
<div class="container py-5 text-center">
  <h2>Pay for {{ cake.name }}</h2>
  <p class="fs-5">Amount: â‚¹{{ cake.price }}</p>

  <div id="paypal-button-container" class="mt-4"></div>
</div>

<!-- PayPal SDK -->
<script src="https://www.paypal.com/sdk/js?client-id={{ paypal_client_id }}&currency=USD"></script>

<script>
paypal.Buttons({
    createOrder: function(data, actions) {
        return actions.order.create({
            purchase_units: [{
                amount: {
                    value: "{{ cake.price }}"
                }
            }]
        });
    },
    onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
            window.location.href = "{% url 'payment_success' %}";
        });
    }
}).render('#paypal-button-container');
</script>
{% endblock %}
