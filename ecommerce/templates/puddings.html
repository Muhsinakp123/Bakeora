{% extends "master.html" %}
{% load static %}

{% block title %}Cakes | Bakeora{% endblock %}

{% block content %}

<!-- ===== HERO SECTION ===== -->
<section class="puddings-hero">
  <div class="puddings-hero-overlay">
    <div class="container">
      <h1>Pure Indulgence in Every Spoonful</h1>
      <p>Warm, chilled & vegan puddings crafted with love</p>
    </div>
  </div>
</section>

<!-- ===== FILTER TABS ===== -->
<section class="puddings-filter-bar">
  <div class="container">
    <div class="puddings-filters">
      <button class="pudding-filter active" data-filter="all">All</button>
      <button class="pudding-filter" data-filter="warm">Warm</button>
      <button class="pudding-filter" data-filter="chilled">Chilled</button>
      <button class="pudding-filter" data-filter="vegan">Vegan</button>
    </div>
  </div>
</section>

<!-- ================= FILTER BAR ================= -->
<section class="cakes-filter-bar">
  <div class="container">
    <form method="get" class="cakes-filter-inner">

      <!-- FLAVOR -->
      <select name="flavor" class="cakes-filter" onchange="this.form.submit()">
        <option value="" hidden>Flavor</option>
        <option value="chocolate" {% if request.GET.flavor == 'chocolate' %}selected{% endif %}>Chocolate</option>
        <option value="vanilla" {% if request.GET.flavor == 'vanilla' %}selected{% endif %}>Vanilla</option>
        <option value="fruit" {% if request.GET.flavor == 'fruit' %}selected{% endif %}>Fruit</option>
        <option value="pistachio" {% if request.GET.flavor == 'pistachio' %}selected{% endif %}>Pistachio</option>
        <option value="strawberry" {% if request.GET.flavor == 'strawberry' %}selected{% endif %}>Strawberry</option>
        <option value="mango" {% if request.GET.flavor == 'mango' %}selected{% endif %}>Mango</option>
      </select>

      <!-- PRICE -->
      <select name="price" class="cakes-filter" onchange="this.form.submit()">
        <option value="" hidden>Price</option>
        <option value="300-600" {% if request.GET.price == '300-600' %}selected{% endif %}>₹150 – ₹450</option>
        <option value="500-1000" {% if request.GET.price == '500-1000' %}selected{% endif %}>₹500 – ₹1000</option>
        <option value="1000-1500" {% if request.GET.price == '1000-1500' %}selected{% endif %}>₹1000 – ₹1500</option>
        <option value="low-high" {% if request.GET.price == 'low-high' %}selected{% endif %}>Low → High</option>
        <option value="high-low" {% if request.GET.price == 'high-low' %}selected{% endif %}>High → Low</option>
      </select>

    </form>
  </div>
</section>


<!-- ===== PRODUCTS GRID ===== -->
<section class="puddings-section">
  <div class="container">
    <div class="puddings-grid">

      {% for pudding in page_obj %}
      <div class="pudding-card {{ pudding.style }}">

        {% if pudding.tag_text %}
        <span class="pudding-tag {{ pudding.tag_color }}">
          {{ pudding.tag_text }}
        </span>
        {% endif %}

        <img src="{{ pudding.image.url }}" alt="{{ pudding.name }}">
        <h6>{{ pudding.name }}</h6>
        <p class="pudding-price">₹{{ pudding.price }}</p>

      </div>
      {% empty %}
        <p class="text-center">No puddings available</p>
      {% endfor %}

    </div>
  </div>
</section>


{% endblock %}